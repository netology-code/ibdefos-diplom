# Курсовая работа «Уязвимости виртуальной среды» по курсу «Безопасность операционных систем. Аttack & Defence»

### Цель проекта

Вам предстоит:

- удалённо подключиться к уязвимой виртуальной машине по ssh;
- использовать sql-инъекцию в уязвимом сервисе для получения хэша пароля от учётной записи руководителя (boss),
- расшифровать хэш от учётной записи boss;
- удалённо подключиться по ssh с использованием учётной записи boss и просмотреть конфиденцильный файл в его домашнем каталоге;
- расшифровать хэш от учётной записи msfadmin и выступить уже в роли защитника, приняв необходимые меры по защите виртуальной машины.

-----

### Чек-лист готовности к курсовой работе

1. У вас установлен VirtualBox.
2. Вы скачали уязвимую виртуальную машину.
3. Вы развернули дополнительно виртуальную машину Kali Linux.

------

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. Hashcat для расшифровки хэшей.
2. Nmap для сканирования портов.
3. Материалы занятий «Атаки», «SQL и транзакции» в личном кабинете.

-----

### Инструкция к выполнению курсовой работы

Импортируйте скачанную уязвимую виртуальную машину.

**Важно!** В строке «Политика MAC-адреса» необходимо выбрать «Включать MAC-адреса для всех сетевых адаптеров», как показано на рисунке:

![Снимок](https://github.com/netology-code/ibdefos-diplom/assets/96241243/3a54fa9f-757f-453d-a529-705a94a9ddf5)

#### Входные данные

Вам стало известно, что для тестирования используется стандартная учётная запись «test» с паролем «test».

Имеется сервис для просмотра текущих задач сотрудников (bd/tasks). Для доступа к просмотру задач используется учётная запись «user», пароль - любой.
IP-адрес уязвимой машины - `10.1.1.100`, маска - `255.255.255.0`.

#### Алгоритм задания

1. С помощью Nmap просканируйте открытые порты уязвимой машины. Вам необходимо убедиться, что порт 22 открыт. На этом порте работает ssh. Сделайте скриншот. Он вам понадобится для отчёта.

2. Подключитесь к уязвимой машине по ssh, используя учётную запись «test». Сделайте скриншот.

<details>
  <summary> Подсказка</summary>

Так как уязвимая машина использует устаревшие версии, применяйте команду с ключом ssh `-oHostKeyAlgorithms=+ssh-dss  test@10.1.1.100`.
  
</details>

3. Перейдите в каталог bd, где располагается сервис tasks. Каталог bd расположен в корневом каталоге с var, tmp и др. Запустите сервис tasks. Введите имя пользователя «user», пароль - любой. Сделайте снимок экрана, чтобы было видно отображение задач.

<details>
  <summary> Подсказка</summary>

Для запуска сервиса выполните команду `./tasks` из каталога bd.
  
</details>

4. Попытайтесь сломать сервис, используя sql-инъекцию или неверные данные ввода. В итоге вы должны увидеть учётные записи с хэшами паролей. Сделайте скриншот.

5. С использованием hashcat расшифруйте пароль для учётной записи «boss» и под ней подключитесь по ssh.

<details>
  <summary> Подсказка</summary>

В старых версиях применялся сложный алгоритм хэширования, основанный на md5.
  
</details>

6. Сделайте скриншот содержимого конфиденциального документа, расположенного по пути `/home/boss`.

<details>
  <summary> Подсказка</summary>

Для просмотра содержимого документа можете использовать команду `cat <имя файла>`.
  
</details>

7. Далее вам необходимо закрыть уязвимости. Расшифруйте пароль пользователя «msfadmin». Войдите под ним на самой уязвимой машине.

9. Удалите пользователя «test». Сделайте скриншот, что его больше нет в списке пользователей.

10. Удалите уязвимый сервис tasks. В каталоге bd создайте личные каталоги для пользователей «boss», «alex», «natasha». Настройте права доступа, чтобы у каждого пользователя был доступ только к своему каталогу. Сделайте скриншот содержимого каталога с отображением назначенных прав.

#### Дополнительное задание (является необязательным и не влияет на получение зачета)

1. Включите на уязвимой машине межсетевой экран ufw. Настройте его таким образом, чтобы были доступны только порты 80, 21.
2. Заново просканируйте открытые порты с использованием Nmap.
3. Сделайте скриншот.

------

### Правила приёма работы

Отправлен отчёт с выполненным заданием в личном кабинете.

-----

### Критерии оценки

Для зачёта должны быть представлены все скриншоты, указанные в блоке «Алгоритм задания».

Работа направляется на доработку, если приложены не все скриншоты, работа выполнена частично или не выполнена.

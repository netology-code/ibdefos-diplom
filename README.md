# Курсовая работа «Уязвимости виртуальной среды» по курсу «Безопасность операционных систем. Аttack & Defence»

### Цель проекта



Вам предстоит:

- удаленно подключиться к уязвимой виртуальной машине по ssh
- использовать sql-инъекцию в уязвимом сервисе для получения хэша пароля от учетной записи начальника (boss)
- расшифровать хэш от учетной записи boss
- удаленно подключиться по ssh с использованием учетной записи начальника (boss) и просмотреть конфиденцильный файл в его домашнем каталоге
- расшифровать хэш от учетной записи msfadmin и выступить уже в роли защитника, приняв необходимые меры по защите виртуальной машины

-----

### Чек-лист готовности к курсовой работе

- У вас установлен VirtualBox
- Вы скачали уязвимую виртуальную машину
- Развернули еще одну виртуальную машину Kali Linux


------

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. Hashcat для расшифровки хэшей
2. Nmap для сканирования портов
3. Материалы лекций "Атаки", "SQL и транзакции"

-----

### Инструкция к выполнению курсовой работы
Импортируйте скачанную уязвимую виртуальную машину.
Важно! В строке "Политика MAC-адреса" необходимо выбрать "Включать MAC-адреса для всех сетевых адаптеров" как показано на рисунке:
![Снимок](https://github.com/netology-code/ibdefos-diplom/assets/96241243/3a54fa9f-757f-453d-a529-705a94a9ddf5)

Входные данные:
Вам стало известно, что для тестирования используется стандартная учетная запись "test" с паролем "test".
Также же известно, что имеется сервис для просмотра текущих задач сотрудников (bd/tasks), для доступа к просмотру задач используется учетная запись "user", пароль - любой.
IP-адрес уязвимой машины 10.1.1.100, маска 255.255.255.0

Пошаговое выполнение:
1) С помощью Nmap просканируйте открытые порты уязвимой машины с целью убедиться, что 22 порт открыт (на этом порту работает ssh). Сделайте скриншот (понадобится для отчета).
2) Подключитесь к уязвимой машине по ssh, используя учетную запись "test". Сделайте скриншот.
Подсказка: так как уязвимая машина использует устаревшие версии используйте команду с ключом ssh -oHostKeyAlgorithms=+ssh-dss  test@10.1.1.100
3) Перейдите в каталог bd (он расположен в корневом каталоге, где и var, tmp и т.д.), где располагается сервис tasks. Запустите сервис tasks, введите имя пользователя "user", пароль - любой. Сделайте скриншот, что отобразились задачи.
Подсказка: для запуска сервиса используйте команду ./tasks, находясь к каталоге bd
4) Попытайтесь сломать сервис, используя sql-инъекцию или неверные данные ввода. В итоге вы должны увидеть учетные записи с хэшами паролей. Сделайте скриншот.
5) С использованием hashcat расшифруйте пароль для учетной записи "boss" и под ней подключитесь по ssh.
Подсказка: в старых версиях для хэширования использовался алгоритм md5, но не простой.
6) Сделайте скриншот содержимого конфиденциального документа, расположенного по пути /home/boss.
Подсказка: для просмотра содержимого можете использовать команду cat <имя файла>.
7) Теперь нам нужно встать на сторону добра и закрыть уязвимости. Расшифруйте пароль пользователя "msfadmin". Войдите под ним (на самой уязвимой машине).
8) Удалите пользователя "test". Сделайте скриншот, что его больше нет в списке пользователей.
9) Удалите уязвимый сервис tasks. И в этом каталоге bd создайте личные каталоги для пользователей "boss", "alex", "natasha", настройте права доступа, чтобы у каждого пользователя был доступ только к своему каталогу. Сделайте скриншот содержимого каталога с отображением назначенных прав.
Дополнительное задание (не влияет на получение зачета):
Включите на уязвимой машине межсетевой экран ufw и настройте таким образом, чтобы были доступны только порты 80, 21. Снова просканируйте открытые порты с использованием Nmap. Сделайте скриншот.



-----

### Критерии оценки

Для зачёта работа должна соответствовать критериям:

1. Должны быть представлены все скриншоты, указанные в пошаговом выполнении.

Работа направляется на доработку, если есть несоответствия одному или нескольким критериям.
